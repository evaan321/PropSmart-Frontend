<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Basic -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- Site Metas -->
  <title>SmartProp</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Site Icons -->
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Site CSS -->
  <link rel="stylesheet" href="style.css">
  <!-- Colors CSS -->
  <link rel="stylesheet" href="css/colors.css">
  <!-- ALL VERSION CSS -->
  <link rel="stylesheet" href="css/versions.css">
  <!-- Responsive CSS -->
  <link rel="stylesheet" href="css/responsive.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/custom.css">

  <!-- Modernizer for Portfolio -->
  <script src="js/modernizer.js"></script>

  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body class="realestate_version">
  <!-- LOADER -->
  <div id="preloader">
    <span class="loader"><span class="loader-inner"></span></span>
  </div>
  <!-- end loader -->
  <!-- END LOADER -->

  <header class="header header_style_01">
    <nav class="megamenu navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
            aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html"> <img style="height:60px;"
              src="DALLÂ·E 2024-05-22 14.48.16 - A simple, modern logo for 'SmartProp', a property rental website. The logo should feature a house icon with a key symbol incorporated into the design.webp" alt=""></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About us </a></li>
            <li><a href="properties.html">Properties</a></li>
            <li><a class="active" href="contact.html">Post Ad</a></li>
            <li><a href="Auth/login.html">Login/Register</a></li>
            <li id="profilebtn"><a href="profile.html">Profile</a></li>
            <li id="logoutbtn"><a href="#" onclick="handleLogout()">Logout</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <div class="all-title-box">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h2>Edit Rent Post</h2>
          <!-- Breadcrumbs -->
          <nav id="breadcrumbs">
            <ul>
              <li><a href="#">Home</a></li>
              <li>Edit Rent Post</li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div id="support" class="section wb">
    <div class="container">
      <div class="section-title text-center">
        <h3>Edit Your Ad</h3>
        <p class="lead">Please use high-quality Image to maintain website Quality and Fill out all the information correctly</p>
      </div><!-- end title -->

      <div class="row">
        <div class="col-md-12">
          <div class="contact_form">
            <div id="message"></div>
            <form id="editform" class="row" onsubmit="editPost(event)" name="contactform" method="post">
              <fieldset class="row-fluid">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <input type="text" name="title" id="Title" class="form-control" placeholder="Title">
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <input type="text" name="location" id="Address" class="form-control" placeholder="Address">
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <input type="number" name="area" id="Area" class="form-control" placeholder="Area in Sqft">
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <input type="number" name="rent" id="Rent" class="form-control" placeholder="Your Rent">
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <input type="number" name="number_of_rooms" id="room" class="form-control" placeholder="Number of Rooms">
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <label>Image</label>
                  <input id="image-upload" type="file" />
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <textarea class="form-control" name="description" id="description" rows="6" placeholder="Give us more details.."></textarea>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                  <button type="submit" value="SEND" id="submit" class="btn btn-light btn-radius btn-brd grd1 btn-block">Save Changes</button>
                </div>
              </fieldset>
            </form>
          </div>
        </div><!-- end col -->
      </div><!-- end row -->
    </div><!-- end container -->
  </div><!-- end section -->

  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-md-4 col-sm-4 col-xs-12">
          <div class="widget clearfix">
            <div class="widget-title">
              <h1 style="color: aliceblue;">SmartProp</h1>
            </div>
            <p> About SmartProp: At SmartProp, we strive to make the process of finding and renting properties as smooth and efficient as possible. Our platform offers a diverse range of listings, advanced search filters, and detailed property information to help you find the perfect home. Whether you're a landlord looking to list your property or a renter in search of your next residence, SmartProp is here to connect you with the best options available. Trust, reliability, and ease of use are at the core of our mission.</p>
          </div><!-- end clearfix -->
        </div><!-- end col -->

        <div class="col-md-3 col-sm-3 col-xs-12">
          <div class="widget clearfix">
            <div class="widget-title">
              <h3>Info Link</h3>
            </div>
            <ul class="twitter-widget footer-links">
              <li><a href="#"> Home </a></li>
              <li><a href="#"> About Us </a></li>
              <li><a href="#"> Properties</a></li>
              <li><a href="#"> Contact</a></li>
            </ul><!-- end links -->
          </div><!-- end clearfix -->
        </div><!-- end col -->

        <div class="col-md-3 col-sm-3 col-xs-12">
          <div class="widget clearfix">
            <div class="widget-title">
              <h3>Contact Details</h3>
            </div>
            <ul class="footer-links">
              <li><a href="mailto:#">evaanrahman2@gmail.com</a></li>
              <li>Sector 14 Road 17 Uttara Dhaka - 1230 Bangladesh</li>
              <li>+880131059-4301</li>
            </ul><!-- end links -->
          </div><!-- end clearfix -->
        </div><!-- end col -->

        <div class="col-md-2 col-sm-2 col-xs-12">
          <div class="widget clearfix">
            <div class="widget-title">
              <h3>Social</h3>
            </div>
            <ul class="footer-links">
              <li><a href="#"><i class="fa fa-facebook"></i> Facebook</a></li>
              <li><a href="#"><i class="fa fa-github"></i> Github</a></li>
            </ul><!-- end links -->
          </div><!-- end clearfix -->
        </div><!-- end col -->

      </div><!-- end row -->
    </div><!-- end container -->
  </footer><!-- end footer -->

  <a href="#" id="scroll-to-top" class="dmtop global-radius"><i class="fa fa-angle-up"></i></a>

  <!-- ALL JS FILES -->
  <script src="js/all.js"></script>
  <!-- ALL PLUGINS -->
  <script src="js/custom.js"></script>
  <script src="js/portfolio.js"></script>
  <script src="js/hoverdir.js"></script>
  <script src="all.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const postId = urlParams.get('id');

      if (postId) {
        fetch(`https://propsmart.onrender.com/Post/${postId}/`)
          .then(res => res.json())
          .then(data => {
            document.getElementById('Title').value = data.title;
            document.getElementById('Address').value = data.location;
            document.getElementById('Area').value = data.area;
            document.getElementById('Rent').value = data.rent;
            document.getElementById('room').value = data.number_of_rooms;
            document.getElementById('description').value = data.desc;
          })
          .catch(error => console.error('Error fetching post data:', error));
      }
    });

    function editPost(event) {
      event.preventDefault();

      const urlParams = new URLSearchParams(window.location.search);
      const postId = urlParams.get('id');

      const postData = {
        title: document.getElementById('Title').value,
        location: document.getElementById('Address').value,
        area: document.getElementById('Area').value,
        rent: document.getElementById('Rent').value,
        number_of_rooms: document.getElementById('room').value,
        desc: document.getElementById('description').value,
        picture: document.getElementById('image-upload').files[0]
      };

      fetch(`https://propsmart.onrender.com/Post/${postId}/`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(postData),
      })
        .then(response => response.json())
        .then(data => {
          if (data.id) {
            alert('Post updated successfully!');
            window.location.href = 'profile.html';
          } else {
            alert('Failed to update the post. Please try again.');
          }
        })
        .catch(error => console.error('Error updating post:', error));
    }
  </script>

</body>

</html>
